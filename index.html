<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Landing Page</title>
</head>
<body>
    <section id="home" class="section">
        <div class="container-home">
            <div class="container-text">
                <span>Campanha</span>
                <h1>Jeito Verde & Azul de Viver</h1>
                <p>Aqui você fica por dentro das atualizações e andamento da campanha que vai te levar ao topo.</p>
            </div>
            <div class="container-logo">
                <img class="RR-logo" src="images/RR_logo.png" alt="Reserva Royal">
                <img class="verde-azul-logo" src="images/V&A_logo.png" alt="Verde & Azul Urbanismo">
            </div>
            <button type="button" id="playButton" class="play-button">
                <span class="play-icon">▶</span>
                <span class="play-text">ATIVAR ÁUDIO</span>
            </button>
        </div>
    </section>
    
    <section id="content1" class="section">
        <div class="container-content">
            <div id="content1-text">
                <h1>Progresso da Campanha</h1>
            </div>
            <div class="pie-chart-container">
                <h2>Progresso de Vendas</h2>
                <div class="pie-chart-info">
                    <div class="pie-chart-meta">
                        <span>Meta: 30 lotes</span>
                    </div>
                    <canvas id="salesPieChart"></canvas>
                </div>
            </div>
        </div>
    </section>

    <section id="content2" class="section">
        <div id="content2-chart" class="container-content">
            <div class="chart-container">
                <h2>Ranking de Vendas</h2>
                <canvas id="rankingChart"></canvas>
            </div>
        </div>
    </section>
    
    <section id="content3" class="section">
        <div class="container-content">
            <div id="content3-text" class="container-text">
                <h1>Prêmiados da campanha</h2>
            </div>
            
            <div class="carousel-container">
                <div class="carousel-slide">
                    <img src="images/corretor_1.jpg" alt="Corretor 1" class="carousel-image">
                    <img src="images/corretor_2.JPG" alt="Corretor 2" class="carousel-image">
                    <img src="images/corretor_3.jpg" alt="Corretor 3" class="carousel-image">
                </div>
                <button type="button" class="carousel-button prev-button">&#10094;</button>
                <button type="button" class="carousel-button next-button">&#10095;</button>
                <div class="carousel-dots">
                    <span class="dot"></span>
                    <span class="dot active"></span>
                    <span class="dot"></span>
                </div>
            </div>
        </div>
    </section>
    
    <section id="content4" class="section">
        <div id="content4-logo" class="container-content">
            <img class="RR-logo" src="images/RR_logo.png" alt="Reserva Royal">
            <img class="verde-azul-logo" src="images/V&A_logo.png" alt="Verde & Azul Urbanismo">
        </div>
    </section>

    <audio id="backgroundAudio" loop>
        <source src="audio/audio.mp3" type="audio/mp3">
        Seu navegador não suporta o elemento de áudio.
    </audio>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const audio = document.getElementById('backgroundAudio');
            const playButton = document.getElementById('playButton');
            
            // Ocultar botão se o áudio já estiver tocando
            audio.addEventListener('playing', function() {
                playButton.classList.add('hidden');
            });
            
            // Exibir botão se o áudio parar
            audio.addEventListener('pause', function() {
                playButton.classList.remove('hidden');
            });
            
            // Botão para iniciar a reprodução do áudio
            playButton.addEventListener('click', function() {
                audio.play()
                    .then(() => {
                        playButton.classList.add('hidden');
                    })
                    .catch(error => {
                        console.log('Erro ao reproduzir o áudio:', error);
                    });
            });

            // Gráfico de Pizza - Progresso de Vendas
            const pieCtx = document.getElementById('salesPieChart').getContext('2d');
            
            // Dados de vendas
            const lotesVendidos = 22;
            const lotesRestantes = 30 - lotesVendidos;
            
            const salesPieChart = new Chart(pieCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Lotes Vendidos', 'Lotes Restantes'],
                    datasets: [{
                        data: [lotesVendidos, lotesRestantes],
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(220, 220, 220, 0.5)'
                        ],
                        borderColor: [
                            'rgba(54, 162, 235, 1)',
                            'rgba(220, 220, 220, 0.8)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'white',
                                font: {
                                    size: 14
                                },
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label;
                                    const value = context.raw;
                                    const percentage = Math.round(value / 30 * 100);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateRotate: true,
                        animateScale: true
                    }
                },
                plugins: [{
                    id: 'centerText',
                    beforeDraw: function(chart) {
                        const width = chart.width;
                        const height = chart.height;
                        const ctx = chart.ctx;
                        
                        ctx.restore();
                        ctx.font = '16px Barlow Condensed';
                        ctx.textBaseline = 'middle';
                        
                        const text = Math.round((lotesVendidos / 30) * 100) + '%';
                        const textX = Math.round((width - ctx.measureText(text).width) / 2);
                        const textY = height / 2;
                        
                        ctx.fillStyle = 'white';
                        ctx.fillText(text, textX, textY);
                        
                        ctx.font = 'bold 24px Barlow Condensed';
                        const number = lotesVendidos.toString();
                        const numberX = Math.round((width - ctx.measureText(number).width) / 2);
                        const numberY = height / 2 - 25;
                        
                        ctx.fillText(number, numberX, numberY);
                        
                        ctx.font = '14px Barlow Condensed';
                        const subtitle = 'lotes vendidos';
                        const subtitleX = Math.round((width - ctx.measureText(subtitle).width) / 2);
                        const subtitleY = height / 2 + 20;
                        
                        ctx.fillText(subtitle, subtitleX, subtitleY);
                        ctx.save();
                    }
                }]
            });

            // Configuração do Gráfico de Ranking
            const ctx = document.getElementById('rankingChart').getContext('2d');
            
            // Dados dos vendedores
            const vendedores = ['João Silva', 'Maria Santos', 'Pedro Oliveira', 'Ana Costa', 'Carlos Pereira'];
            const vendas = [42, 35, 28, 22, 16];
            const cores = [
                'rgba(255, 99, 132, 0.8)',
                'rgba(54, 162, 235, 0.8)',
                'rgba(255, 206, 86, 0.8)',
                'rgba(75, 192, 192, 0.8)',
                'rgba(153, 102, 255, 0.8)'
            ];
            
            // Criar o gráfico
            const rankingChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: vendedores,
                    datasets: [{
                        label: 'Vendas Realizadas',
                        data: vendas,
                        backgroundColor: cores,
                        borderColor: cores.map(cor => cor.replace('0.8', '1')),
                        borderWidth: 1,
                        barThickness: 30,
                        maxBarThickness: 40
                    }]
                },
                options: {
                    indexAxis: 'y',  // Gráfico de barras horizontais
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Top 5 Vendedores',
                            font: {
                                size: 22
                            },
                            padding: {
                                top: 10,
                                bottom: 20
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Unidades Vendidas',
                                font: {
                                    size: 16
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Vendedores',
                                font: {
                                    size: 16
                                }
                            },
                            ticks: {
                                font: {
                                    size: 14
                                }
                            },
                            grid: {
                                display: false
                            }
                        }
                    },
                    responsive: true,
                    maintainAspectRatio: false,
                    layout: {
                        padding: {
                            left: 20,
                            right: 30,
                            top: 10,
                            bottom: 10
                        }
                    }
                }
            });

            // Carrossel
            const carouselSlide = document.querySelector('.carousel-slide');
            const carouselImages = document.querySelectorAll('.carousel-image');
            const prevButton = document.querySelector('.prev-button');
            const nextButton = document.querySelector('.next-button');
            const dots = document.querySelectorAll('.dot');
            
            // Contador - começando na imagem do meio (índice 1)
            let counter = 1;
            
            // Inicialize o carrossel na imagem do meio
            window.addEventListener('load', () => {
                // Calculamos a posição com base na largura do slide + margin
                const slideWidth = carouselImages[0].offsetWidth + 10; // 10px é    o margin-right
                carouselSlide.style.transform = 'translateX(' + (-slideWidth * counter) + 'px)';
                
                // Atualiza os pontos indicadores
                dots.forEach(dot => dot.classList.remove('active'));
                dots[counter].classList.add('active');
            });
            
            // Função para atualizar o carrossel
            function updateCarousel() {
                // Calculamos a posição com base na largura do slide + margin
                const slideWidth = carouselImages[0].offsetWidth + 10; // 10px é o margin-right
                carouselSlide.style.transform = 'translateX(' + (-slideWidth * counter) + 'px)';
                
                // Atualiza os pontos indicadores
                dots.forEach(dot => dot.classList.remove('active'));
                dots[counter].classList.add('active');
            }
            
            // Botão próximo
            nextButton.addEventListener('click', () => {
                if (counter >= carouselImages.length - 1) return;
                counter++;
                updateCarousel();
                resetInterval();
            });
            
            // Botão anterior
            prevButton.addEventListener('click', () => {
                if (counter <= 0) return;
                counter--;
                updateCarousel();
                resetInterval();
            });
            
            // Pontos indicadores
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    counter = index;
                    updateCarousel();
                    resetInterval();
                });
            });
            
            // Avança automaticamente a cada 5 segundos
            let slideInterval = setInterval(autoSlide, 5000);
            
            function autoSlide() {
                if (counter >= carouselImages.length - 1) {
                    counter = 0;
                } else {
                    counter++;
                }
                updateCarousel();
            }
            
            // Resetar o intervalo quando o usuário interage com o carrossel
            function resetInterval() {
                clearInterval(slideInterval);
                slideInterval = setInterval(autoSlide, 5000);
            }
            
            // Pausa o carrossel quando o mouse está sobre ele
            carouselSlide.addEventListener('mouseenter', () => {
                clearInterval(slideInterval);
            });
            
            // Retoma o carrossel quando o mouse sai
            carouselSlide.addEventListener('mouseleave', () => {
                slideInterval = setInterval(autoSlide, 5000);
            });
            
            // Ajusta o carrossel quando a janela é redimensionada
            window.addEventListener('resize', () => {
                setTimeout(() => {
                    const slideWidth = carouselImages[0].offsetWidth + 10; // 10px é o margin-right
                    carouselSlide.style.transition = 'none';
                    carouselSlide.style.transform = 'translateX(' + (-slideWidth * counter) + 'px)';
                    setTimeout(() => {
                        carouselSlide.style.transition = 'transform 0.5s ease';
                    }, 50);
                }, 500);
            });
        });
    </script>
</body>
</html>